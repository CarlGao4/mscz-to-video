# Notes for users using MKL release (Intel GPU)

The official package of IPEX (Intel Extension for Pytorch) is not built with AOT (Ahead-Of-Time), with only JIT (Just-In-Time) support (mscz2video release is also packed with this package). This means that the first separation operation each time you start mscz-video will take a long time (normally more than 5 minutes) to compile the model if you use Intel GPU. Please note that if you restart mscz-video, the model will be recompiled again. JIT may also fails sometimes. This is when you need to restart mscz-video.

This is because AOT binaries have to be compiled separately for each GPU architecture, and including all architectures will make the package too large (40GB+). But I've built the AOT binaries separately for each architecture.

I've built different versions of  `intel_extension_for_pytorch`. The binaries are built for `Windows x86_64`, `Python 3.11`. Currently release packages are packed with `intel_extension_for_pytorch 2.1.40+xpu.2025.0.1`. Support list of each version is shown below. Please note that the support list is not associated with the version of mscz-video, but the version of `intel_extension_for_pytorch`. It just means that the version of mscz-video is packed with the corresponding version of `intel_extension_for_pytorch`. If you are running from source code, you can actually use any version of `intel_extension_for_pytorch` as long as it is compatible with your GPU.

The table is generated by running `ocloc.exe` with argument device from 0x0000 to 0xFFFF. Theroetically, all these GPUs should be supported (even if they are not released yet) and even some unlisted GPUs can be supported.

## Install AOT enabled IPEX (Windows only, CPython 3.11) version 2.1.40+xpu.2025.0.1 (mscz2video 1.3.0.1 and later)

1. Install Intel graphics driver greater than or equal to `31.0.101.4953` (Windows) from [official website](https://www.intel.com/content/www/us/en/download/785597/792980/intel-arc-iris-xe-graphics-windows.html).
2. Run mscz2video. If any Intel GPU is detected but AOT version of IPEX is not installed, a dialog will pop up after startup, asking you whether to download an AOT build or open the documentation (this page).
3. Just click on download button and your browser will download a 7z file from GitHub. Or, use this [direct link](https://github.com/CarlGao4/ipex-wheel/releases/download/v2.1.40%2Bxpu.2025.0.1-cp311/2.1.40+xpu.2025.0.1-AOT.7z). The file is about 319MB.
4. Do not extract the downloaded 7z file immediately because it would require 45.3GB of disk space and you don't need all of the files. Instead, look at the desire version in mscz2video's About AOT dialog or look up the PCI ID of your GPU in the table below. Then extract the corresponding folder in the 7z file to `C:\mscz2video\intel_extension_for_pytorch\bin`, replacing the existing `intel-ext-pt-gpu.dll` file. If multiple generations are listed, it means I can't determine the exact generation code from the device ID, so you will need to try them one by one.
5. Try runing the program again! It will no longer take a long time. If it still takes a long time, please try other versions of AOT build.

Following GPUs are supported with `2.1.40+xpu.2025.0.1` (for details, please see [find_device_win.py](find_device_win.py)):
| PCI ID (Only the device part) | Codename | Architecture | Generation Code | Display Name |
| ----------------------------- | -------- | ------------ | --------------- | ------------ |
| `9A40` `9A49` `9A59` `9A60` `9A68` `9A70` `9A78` | Tiger Lake (`tgl` `tgllp`) | Xe | `12.0.0` | `Intel® UHD Graphics` `Intel® Iris® Xe Graphics` |
| `4C80` `4C8A` `4C8B` `4C8C` `4C90` `4C9A` | Rocket Lake (`rkl`) | Xe | `12.1.0` | `Intel® UHD Graphics` `Intel® UHD Graphics 750` `Intel® UHD Graphics 730` `Intel® UHD Graphics P750` |
| `4680` `4682` `4688` `468A` `468B` `4690` `4692` `4693` `A780` `A781` `A782` `A783` `A788` `A789` `A78A` `A78B` | Alder Lake-S (`adl-s`), Raptor Lake-S (`rpl-s`) | Xe | `12.2.0` | `Intel® UHD Graphics` `Intel® UHD Graphics 770` `Intel® UHD Graphics 730` `Intel® UHD Graphics 710` |
| `4626` `4628` `462A` `46A0` `46A1` `46A3` `46A6` `46A8` `46AA` `46B0` `46B1` `46B3` `46C0` `46C1` `46C3` `A720` `A721` `A7A0` `A7A1` `A7A8` `A7A9` `A7AA` `A7AB` `A7AC` `A7AD` | Alder Lake-P (`adl-p`), Raptor Lake-P (`rpl-p`) | Xe | `12.3.0` | `Intel® UHD Graphics` `Intel® Iris® Xe Graphics` `Intel® Graphics` |
| `46D0` `46D1` `46D2` `46D3` `46D4` | Alder Lake-N (`adl-n`) | Xe | `12.4.0` | `Intel® UHD Graphics` `Intel® Graphics` |
| `4905` `4906` `4907` `4908` `4909` | DG1 (`dg1`) | Xe | `12.10.0` | `Intel® Iris® Xe MAX Graphics` `Iris® Xe® Pod` `Intel Server GPU SG-18M` `Intel® Iris® Xe Graphics` `Intel® Iris® Xe MAX 100 Graphics` |
| `4F80` `4F81` `4F82` `4F83` `4F84` `5690` `5691` `5692` `56A0` `56A1` `56A2` `56BE` `56BF` `56C0` `56C2` | Alchemist (`acm-g10` `ats-m150` `dg2` `dg2-g10-a0` `dg2-g10-a1` `dg2-g10-b0` `dg2-g10-c0`) | Xe-HPG | `12.55.0` `12.55.1` `12.55.4` `12.55.8` | `Intel® Iris® Xe Graphics` `Intel® Arc™ A770M Graphics` `Intel® Arc™ A730M Graphics` `Intel® Arc™ A550M Graphics` `Intel® Arc™ A770 Graphics` `Intel® Arc™ A750 Graphics` `Intel® Arc ™ A580 Graphics` `Intel® Arc™ A750E Graphics` `Intel® Arc™ A580E Graphics` `Intel® Data Center GPU Flex 170` `Intel® Data Center GPU Flex 170V` |
| `4F87` `4F88` `5693` `5694` `5695` `56A5` `56A6` `56B0` `56B1` `56BA` `56BB` `56BC` `56BD` `56C1` | Alchemist (`acm-g11` `ats-m75` `dg2-g11` `dg2-g11-a0` `dg2-g11-b0` `dg2-g11-b1`) | Xe-HPG | `12.56.5` | `Intel® Iris® Xe Graphics` `Intel® Arc™ A370M Graphics` `Intel® Arc™ A350M Graphics` `Intel® Iris® Xe MAX A200M Graphics` `Intel® Arc™ A380 Graphics` `Intel® Arc™ A310 Graphics` `Intel® Arc™ Pro A30M Graphics` `Intel® Arc™ Pro A40/A50 Graphics` `Intel® Arc™ A380E Graphics` `Intel® Arc™ A310E Graphics` `Intel® Arc™ A370E Graphics` `Intel® Arc™ A350E Graphics` `Intel® Data Center GPU Flex 140` |
| `4F85` `4F86` `5696` `5697` `56A3` `56A4` `56B2` `56B3` | Alchemist (`acm-g12` `dg2-g12` `dg2-g12-a0`) | Xe-HPG | `12.57.0` | `Intel® Iris® Xe Graphics` `Intel® Arc™ A570M Graphics` `Intel® Arc™ A530M Graphics` `Intel® Arc™ Xe Graphics` `Intel® Arc ™ Pro A60M Graphics` `Intel® Arc ™ Pro A60 Graphics` |
| `0BD0` | Ponte Vecchio XL (`pvc-xl-a0` `pvc-sdv` `pvc-xl-a0p`) | Xe-HPC | `12.60.0` `12.60.1` | (Unknown) |
| `0B69` `0B6E` `0BD5` `0BD6` `0BD7` `0BD8` `0BD9` `0BDA` `0BDB` | Ponte Vecchio XT (`pvc` `pvc-xt-a0` `pvc-xt-b0` `pvc-xt-b1` `pvc-xt-c0`) | Xe-HPC | `12.60.3` `12.60.5` `12.60.6` `12.60.7` | `Intel® Data Center GPU Max 1450` `Intel® Data Center GPU Max 1100C` `Intel® Data Center GPU Max 1100` `Intel® Data Center GPU Max 1550` `Intel® Data Center GPU Max 1350` `Intel® Data Center GPU Max 1100` |
| `0BD4` | Ponte Vecchio XT (`pvc-vg` `pvc-xt-c0-vg`) | Xe-HPC | `12.61.7` | `Intel® Data Center GPU Max 1550VG` |
| `7D40` `7D41` `7D45` `7D67` | Meteor Lake, Arrow Lake (`arl-s` `arl-u` `mtl` `mtl-m` `mtl-u` `mtl-s` `mtl-u-a0` `mtl-u-b0`) | Xe-LPG | `12.70.0` `12.70.4` | `Intel® Graphics` |
| `7D55` `7DD5` | Meteor Lake (`mtl-h` `mtl-p` `mtl-h-a0` `mtl-h-b0`) | Xe-LPG | `12.71.0` `12.71.4` | `Intel® Arc™ Graphics` `Intel® Graphics` |
| `7D51` `7DD1` `B640` | Arrow Lake (`arl-h` `arl-h-a0` `arl-h-b0`) | Xe-LPG | `12.74.0` `12.74.4` | `Intel® Graphics` |
| `E202` `E20B` `E20C` `E20D` `E210` `E212` `E214` `E215` `E216` `E217` | Battlemage (`bmg` `bmg-g21` `bmg-g21-a0` `bmg-g21-a1` `bmg-g21-b0`) | Xe2 | `20.1.0` | `Intel® Graphics` `Intel® Arc™ B580 Graphics` `Intel® Arc™ B570 Graphics` |
| `E220` `E221` `E222` `E223` | (No acronym) | Xe2 | `20.2.0` | (Unknown) |
| `6420` `64A0` `64B0` | Lunar Lake (`lnl-m` `lnl-a0` `lnl-a1` `lnl-b0`) | Xe2 | `20.4.0` `20.4.1` `20.4.4` | `Intel® Graphics` `Intel® Arc™ Graphics` |

Display names above come from [Intel official documentation](https://dgpu-docs.intel.com/devices/hardware-table.html) and [The PCI ID Repository](https://admin.pci-ids.ucw.cz/read/PC/8086).